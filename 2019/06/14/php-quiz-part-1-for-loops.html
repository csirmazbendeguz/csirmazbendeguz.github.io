<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"/>
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <title>PHP quiz #1 - for loop - Bendegúz Csirmaz</title>
    <script src="https://kit.fontawesome.com/a607672ce1.js"></script>
    <link type="application/atom+xml" rel="alternate" href="https://csirmazbendeguz.net/feed.xml" />
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>PHP quiz #1 - for loop</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="PHP quiz #1 - for loop" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="For loops are one of the most fundamental and ubiquitous control flow statements. They are so essential to computer programming, you would expect every developer to know them inside out. As for me, I never would have thought I could learn anything new about them - I was wrong." />
<meta property="og:description" content="For loops are one of the most fundamental and ubiquitous control flow statements. They are so essential to computer programming, you would expect every developer to know them inside out. As for me, I never would have thought I could learn anything new about them - I was wrong." />
<link rel="canonical" href="https://csirmazbendeguz.net/2019/06/14/php-quiz-part-1-for-loops.html" />
<meta property="og:url" content="https://csirmazbendeguz.net/2019/06/14/php-quiz-part-1-for-loops.html" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-06-14T00:00:00+02:00" />
<script type="application/ld+json">
{"description":"For loops are one of the most fundamental and ubiquitous control flow statements. They are so essential to computer programming, you would expect every developer to know them inside out. As for me, I never would have thought I could learn anything new about them - I was wrong.","@type":"BlogPosting","headline":"PHP quiz #1 - for loop","dateModified":"2019-06-14T00:00:00+02:00","datePublished":"2019-06-14T00:00:00+02:00","url":"https://csirmazbendeguz.net/2019/06/14/php-quiz-part-1-for-loops.html","mainEntityOfPage":{"@type":"WebPage","@id":"https://csirmazbendeguz.net/2019/06/14/php-quiz-part-1-for-loops.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
  </head>
  <body>
    <div class="wrapper post-wrapper">
  <header class="header">
    <h1 class="site-name">
      <a href="/">Bendegúz&nbsp;Csirmaz</a>
    </h1>
  </header>
  <main class="content">
    <section class="section">
  <h1>PHP quiz #1 - for loop</h1>
  <span class="post__date">June 14, 2019</span>
  <p>For loops are one of the most fundamental and ubiquitous control flow statements. They are so essential to computer programming, you would expect every developer to know them inside out. As for me, I never would have thought I could learn anything new about them - I was wrong.
</p>
</section>

<section class="section">
  <h2>Question</h2>
  <p>What will this code output?</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="cp">&lt;?php</span>

<span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">,</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="o">++</span><span class="nv">$i</span><span class="p">,</span> <span class="o">++</span><span class="nv">$j</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">echo</span> <span class="s2">"</span><span class="nv">$i</span><span class="s2">,</span><span class="nv">$j</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

  <ul class="answers">
    <li class="answer">
      <span class="answer-letter">A</span>
      <pre>Syntax error</pre>
    </li>
    <li class="answer">
      <span class="answer-letter">B</span>
      <pre>0,0
1,1
2,2</pre>
    </li>
    <li class="answer">
      <span class="answer-letter">C</span>
      <pre>0,0
1,1</pre>
    </li>
    <li class="answer">
      <span class="answer-letter">D</span>
      <pre>0,0
1,1
2,1</pre>
    </li>
  </ul>
</section>

<section class="section">
  <h2>Answer</h2>
  <a id="show-answer" href="#">Show the answer</a>
  <div id="answer">
    <div class="answer">
      <span class="answer-letter">C</span>
      <pre>0,0
1,1</pre>
    </div>
  </div>
</section>

<section class="section">
  <h2>Explanation</h2>
  <h3>The for loop header</h3>
  <p>
    Similarly to other languages, it is perfectly legal to initialize and update multiple variables in for loop headers.
    Consider the following:
  </p>
<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">...</span><span class="p">;</span> <span class="o">++</span><span class="nv">$i</span><span class="p">,</span> <span class="o">++</span><span class="nv">$j</span><span class="p">)</span> <span class="c1">// OK!</span></code></pre></figure>
  <p>
    This is a valid PHP code snippet, and it does exactly what you would expect:
    it introduces two variables, <code class="highlighter-rouge">$i</code> and <code class="highlighter-rouge">$j</code>,
    with the initial value of <code class="highlighter-rouge">0</code>,
    and it increments them by one at the end of each iteration.
  </p>
  <p>No trickery here.</p>
  <p>The difficulty lies in the loop's condition:</p>
<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">for</span> <span class="p">(</span><span class="o">...</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">,</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="o">...</span><span class="p">)</span> <span class="c1">// ???</span></code></pre></figure>
  <p>
    It might not be immediately obvious what effect does this code have on the loop.
    One thing's for sure: it won't throw any syntax errors, it's syntactically correct.
  </p>
  <aside class="comment">
    <p>
      At first glance, it might seem like the loop defines multiple conditions that are eventually <em>AND</em>ed together.
      This is a fair guess and it's not without reason.
      Haskell does something similar - it <em>AND</em>s together multiple predicates in list comprehensions.
    </p>
    <p>This is not the case here.</p>
    <p>
      PHP has its roots in C.
      As such, it has a few weird historical remains that at first may sound completely counterintuitive.
    </p>
  </aside>
  <p>
    Surprising as it may seem, <code class="highlighter-rouge">$i < 3, $j < 2</code> is actually a
    <strong>single expression</strong>, and as all expressions, it evaluates to something.
  </p>
</section>

<section class="section">
  <h3>Comma operator (C)</h3>
  <p>In C, the <a href="https://en.wikipedia.org/wiki/Comma_operator">comma operator</a> (<code class="highlighter-rouge">,</code>) is an operator that evaluates two expressions and returns the result of the second one.</p>
  <p>
    For example, the following code prints the text <code class="highlighter-rouge">Hello World!</code> to stdout,
    and assigns <code class="highlighter-rouge">3</code> to variable <code class="highlighter-rouge">a</code>:
  </p>
<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">printf</span><span class="p">(</span><span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span><span class="p">),</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">);</span></code></pre></figure>

  <p>The paranthesized expression is evaluated something like this:</p>
<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cm">/* 0. */</span> <span class="n">printf</span><span class="p">(</span><span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span><span class="p">),</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span>
<span class="cm">/* 1. */</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">3</span>
<span class="cm">/* 2. */</span> <span class="mi">3</span></code></pre></figure>
  <aside class="comment">
    <code class="highlighter-rouge">printf</code> returns the number of characters
    written (<code class="highlighter-rouge">13</code> in our case).
  </aside>
  <aside class="comment">
    <p>
      Notice the parentheses around the expression in question.
      They are there for a reason.
    </p>
    <p>
      In C, the comma operator has the lowest precedence of all operators.
      Its precedence is even lower than the assignment operator's (<code class="highlighter-rouge">=</code>)!
    </p>
    <p>That is to say, omitting the parentheses would result in the code being parsed like this:</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="kt">int</span> <span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">printf</span><span class="p">(</span><span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span><span class="p">)),</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span></code></pre></figure>

    <p>Which, of course, wouldn't make any sense.</p>
  </aside>
</section>

<section class="section">
  <h3>Comma operator (PHP)</h3>
  <p>
    This ancient operator did not stand the test of time,
    not many programming languages support it.
  </p>
  <p>
    PHP doesn't do either.
    It's not listed in the <a href="https://www.php.net/manual/en/language.operators.precedence.php">precedence table</a> and using it will generally result in a syntax error.
  </p>
<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="o">&lt;?</span><span class="n">php</span>

<span class="c1">// Parse error: syntax error, unexpected ',' in ...</span>
<span class="err">$</span><span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span></code></pre></figure>
  <p>However, surprisingly, there is an exception to the rule: for loop conditions.</p>
  <p>For some strange reason, in for loop conditions the comma operator is correctly evaluated.</p>
  <div class="compare-table">
    <table>
      <tbody>
      <tr>
        <td>
<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">for</span> <span class="p">(</span><span class="o">...</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">,</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="o">...</span><span class="p">)</span></code></pre></figure>
        </td>
        <td>
<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">for</span> <span class="p">(</span><span class="o">...</span><span class="p">;</span> <span class="nv">$j</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="o">...</span><span class="p">)</span></code></pre></figure>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <p>
    In this case, the expression <code class="highlighter-rouge">$i < 3, $j < 2</code> has the same effect as <code class="highlighter-rouge">$j < 2</code>.
    The first operand is evaluated, but its result is disregarded.
  </p>
  <p>The loop will only iterate twice.</p>
</section>


<section class="quiz-paginator">
  
  
  <a href="/2019/06/15/php-quiz-part-2-echoes.html">
    <h2>next &gt;&gt;</h2>
  </a>
  
</section>

<section class="section php-quizzes">
  <p class="php-quiz-intro">This post is part of a series based on a presentation I gave at <a href="https://cheppers.com">Cheppers</a> on March 20, 2019.</p>
  
  <ul class="php-quiz-list">
    
    <li>
      
      <strong>PHP quiz #1 - for loop</strong>
      
    </li>
    
    <li>
      
      <a href="/2019/06/15/php-quiz-part-2-echoes.html">PHP quiz #2 - echo</a>
      
    </li>
    
    <li>
      
      <a href="/2019/06/16/php-quiz-part-3-associativity.html">PHP quiz #3 - operator associativity</a>
      
    </li>
    
    <li>
      
      <a href="/2019/06/16/php-quiz-part-4-hoisting.html">PHP quiz #4 - hoisting</a>
      
    </li>
    
    <li>
      
      <a href="/2019/06/16/php-quiz-part-5-constructors.html">PHP quiz #5 - constructor overriding</a>
      
    </li>
    
    <li>
      
      <a href="/2019/06/16/php-quiz-part-6-covariance.html">PHP quiz #6 - covariance, contravariance and PHP</a>
      
    </li>
    
  </ul>
</section>


<script src="/assets/js/show-answer.js"></script>

  </main>
  
<div id="disqus_thread"></div>
<script>
  /**
   *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
   *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  var disqus_config = function () {
  this.page.title = 'PHP quiz #1 - for loop';
  this.page.url = 'https://csirmazbendeguz.net/2019/06/14/php-quiz-part-1-for-loops.html';  // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = '/2019/06/14/php-quiz-part-1-for-loops'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://csirmazbendeguz.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  <footer class="footer">
  <span>Copyright&nbsp;©&nbsp;<span class="current-year">2019</span>&nbsp;Bendegúz&nbsp;Csirmaz</span>
  <ul class="icons">
    <li class="icon">
      <a href="https://www.linkedin.com/in/bendeguz-csirmaz/" title="LinkedIn" class="icon-link">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  </ul>
</footer>
<script src="/assets/js/current-year.js"></script>

</div>

    
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-142286966-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-142286966-1');
</script>


  </body>
</html>
